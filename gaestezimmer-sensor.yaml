substitutions:
  room: gaestezimmer
  uroom: GÃ¤stezimmer


esphome:
  name: $room-sensor
  friendly_name: "$uroom"
  area: "$uroom"
                

esp32:
  board: esp32-c6-devkitc-1
  framework:
    type: esp-idf

# Enable logging
logger:
  level: DEBUG
  

# Enable Home Assistant API
api:
  encryption:
    key: "GE0KcSEOHy/XjCR7/cd2kdDiO3rD3Vhs1ilWb5106rQ="

ota:
  - platform: esphome
    

network:
  enable_ipv6: True

openthread:
  tlv: !secret openthread 

# debug:  

bluetooth_proxy:
  

i2c:
  sda: GPIO21
  scl: GPIO20
  scan: True

uart:
  tx_pin: GPIO2
  rx_pin: GPIO3
  baud_rate: 115200
 
bme68x_bsec2_i2c:
  model: bme680
  address: 0x77
  temperature_offset: 3.0

ld2420:

text_sensor:
  - platform: ld2420
    fw_version:
      name: LD2420 Firmware

  - platform: bme68x_bsec2
    iaq_accuracy: 
      name: "IAQ Accuracy"
#  - platform: debug
#    device:
#      name: "Device Info"
#    reset_reason:
#      name: "Reset Reason"

  - platform: version
    name: "Esphome Version"
  - platform: openthread_info
    ip_address:
      name: "Off-mesh routable IP Address"
    channel:
      name: "Channel"
    role:
      name: "Device Role"
      id: role
    rloc16:
      name: "RLOC16"
    ext_addr:
      name: "Extended Address"
    eui64:
      name: "EUI64 Interface ID"
    network_name:
      name: "Network Name"
    network_key:
      name: "Network Key"
    pan_id:
      name: "PAN ID"
    ext_pan_id:
      name: "Extended PAN ID"


sensor:
  - platform: ld2420
    moving_distance:
      name : Moving Distance

  - platform: tsl2561
    name: "Light"
  - platform: bme68x_bsec2
    temperature:
      name: "Temperatur"
    pressure:
      name: "Luftdruck"
    humidity:
      name: "Luftfeuchtigkeit"
    iaq: 
      name: "IAQ"
    co2_equivalent: 
      name: "CO2"
    breath_voc_equivalent: 
      name: "Breath VOC Equivalent"
#  - platform: debug
#    free:
#      name: "Heap Free"
#    block:
#      name: "Heap Max Block"
#    loop_time:
#      name: "Loop Time"
#    cpu_frequency:
#      name: "CPU Frequency"

  - platform: internal_temperature
    name: 'Internal temperature'
  - platform: uptime
    name: Uptime

binary_sensor:
  - platform: ld2420
    has_target:
      name: Presence

select:
  - platform: ld2420
    operating_mode:
      name: Operating Mode LD2420

button:    
  - platform: ld2420
    apply_config:
      name: Apply Config LD2420
    factory_reset:
      name: Factory Reset LD2420
    restart_module:
      name: Restart LD2420
    revert_config:
      name: Undo Edits LD2420
  - platform: restart
    name: "Restart"
    entity_category: diagnostic 
  - platform: safe_mode
    name: "Restart (Safe Mode)"

light:
  - platform: esp32_rmt_led_strip
    id: builtin_led
    rgb_order: RGB
    pin: GPIO8
    num_leds: 1
    #rmt_channel: 0
    chipset: ws2812
    name: "LED"

number:
  - platform: ld2420
    presence_timeout:
      name: Detection Presence Timeout
    min_gate_distance:
      name: Detection Gate Minimum
    max_gate_distance:
      name: Detection Gate Maximum

    gate_select:
      name: Select Gate to Set
    still_threshold:
      name: Set Still Threshold Value
    move_threshold:
      name: Set Move Threshold Value

    gate_move_sensitivity:
      name: Move Calibration Sensitivity Factor
    gate_still_sensitivity:
      name: Still Calibration Sensitivity Factor

    gate_0:
      move_threshold:
        name: Gate 0 Move Threshold
      still_threshold:
        name: Gate 0 Still Threshold
    gate_1:
      move_threshold:
        name: Gate 1 Move Threshold
      still_threshold:
        name: Gate 1 Still Threshold


